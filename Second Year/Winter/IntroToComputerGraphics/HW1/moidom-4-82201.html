<!DOCTYPE html>

<!-- Силвия Петрова, група 4, ф.н. 82201 -->

<html>
	<head>
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<script src="three.min.js"></script>
		<script src="OrbitControls.js"></script>
	</head>
	
	<body>
		<script>
			const FN = 82201; // факултетен номер 
		</script>
		
		<script src="init.js"></script>
		<script src="CSG.js"></script>
			
		<script>
		
			// 1. преименувайте файла на moidom-g-fn.html
			//    g=номер на група, а fn = факултетен номер
			//
			// 2. сменете стойността на константата FN да
			//    е факултетния номер, за да се генерират
			//    сцената, земята и контурът на къщата ви
			//
			// 3. едва тогава почвайте да строите стените
			//    и да добавяте исканите обекти по стаите
			//
			// 4. init.js се създава глобален обект scene
			//    и в него трябва да сложите обектите си!
			//
			// 5. кубът по-долу е само за пример как може
			//    да се слагат обекти в сцената
	

/****************************** HOUSE ***********************************/		
//outside walls
	//big
			var bOutsideWall1 = new THREE.Mesh( new THREE.BoxGeometry( 12, 3.3, 8 ) );
			bOutsideWall1.position.set( 0, 1, 0 );
			var bOutsideWall2 = new THREE.Mesh( new THREE.BoxGeometry( 7, 3.3, 14 ) );
			bOutsideWall2.position.set( 1.5, 1, -2 );
			
			var csg = new CSG();
			csg.union( [bOutsideWall1, bOutsideWall2] );
			var bOutsideWall = csg.toMesh();
	//small
			var sOutsideWall1 = new THREE.Mesh( new THREE.BoxGeometry( 11, 3.3, 7 ) );
			sOutsideWall1.position.set( 0, 1, 0 );
			var sOutsideWall2 = new THREE.Mesh( new THREE.BoxGeometry( 6, 3.3, 13 ) );
			sOutsideWall2.position.set( 1.5, 1, -2 );
			
			var csg = new CSG();
			csg.union( [sOutsideWall1, sOutsideWall2] );
			var sOutsideWall = csg.toMesh();
			
	//subtract
			var csg = new CSG();
			csg.subtract( [bOutsideWall, sOutsideWall] );
			var OutsideWall = csg.toMesh();
			OutsideWall.material = new THREE.MeshPhongMaterial( {color:'palegreen', shininess: 100} );
			

//inside walls         
	
	//BATH
	      //bath big
			var bbath = new THREE.Mesh( new THREE.BoxGeometry( 3, 3.3, 3.7 ) );
			bbath.position.set( 3.5, 1, -5.35 );
	      //bath small
			var sbath = new THREE.Mesh( new THREE.BoxGeometry( 2.6, 3.3, 3.3 ) );
			sbath.position.set( 3.5, 1, -5.35 );
	      //subtract
			var csg = new CSG();
			csg.subtract( [bbath, sbath] );
			var bath = csg.toMesh();
			bath.material = new THREE.MeshPhongMaterial( {color:'palegreen', shininess: 100} );
			
	//glass wall
			var glassWall = new THREE.Mesh( new THREE.BoxGeometry( 0.2, 3.3, 7 ) );
			glassWall.material = new THREE.MeshPhongMaterial( {color:'cornflowerblue', opacity: 0.5, transparent: true} )
			glassWall.position.set( -1.6, 1, 0 );

	//bedroom wall
			var bedWall = new THREE.Mesh( new THREE.BoxGeometry( 4, 3.3, 0.2 ) );
			bedWall.material = new THREE.MeshPhongMaterial( {color:'palegreen', shininess: 100} )
			bedWall.position.set( 0, 1, -3.6);

	//secret room wall
			var secretWall = new THREE.Mesh( new THREE.BoxGeometry( 2.2, 3.3, 0.2 ) );
			secretWall.material = new THREE.MeshPhongMaterial( {color:'palegreen', shininess: 100} )
			secretWall.position.set( 1.6, 1, -8);
			secretWall.rotation.y = -Math.PI / 3;

//doors
	//front door
			var door = new THREE.Mesh( new THREE.BoxGeometry( 0.5, 2.2, 1.1 ) );
			door.position.set( 5.75, 1, -2 );
			var csg = new CSG();
			csg.subtract( [OutsideWall, door] );
			var OutsideWall = csg.toMesh();

	//bed door
			var door = new THREE.Mesh( new THREE.BoxGeometry( 0.9, 2.2, 0.2 ) );
			door.position.set( -0.6, 1, -3.6 );
			var csg = new CSG();
			csg.subtract( [bedWall, door] );
			var bed = csg.toMesh();
			
	//bath door
			door.position.set( 2.9, 1, -3.6 );
			var csg = new CSG();
			csg.subtract( [bath, door] );
			var bath = csg.toMesh();

	//glass door
			var door = new THREE.Mesh( new THREE.BoxGeometry( 0.2, 2.2, 1.5 ) );
			door.position.set( -1.6, 1, -2 );
			var csg = new CSG();
			csg.subtract( [glassWall, door] );
			var glassWall = csg.toMesh();
			scene.add(glassWall);
	
	//secret room door
			var door = new THREE.Mesh( new THREE.BoxGeometry( 1, 1, 0.3 ) );
			door.material = new THREE.MeshPhongMaterial( {color:'brown'} )
			door.rotation.y = -Math.PI / 3;
			door.position.set(  1.7, 0.45, -7.85 );
			var csg = new CSG();
			csg.subtract( [secretWall, door] );
			var secretWall = csg.toMesh();
			scene.add(secretWall);
			

//windows

	//bed window
		//frame
			var frame = new THREE.Mesh( new THREE.BoxGeometry( 0.5, 2, 4 ) );
			frame.material = new THREE.MeshPhongMaterial( {color:'whitesmoke'} )
			frame.position.set( -1.75, 1.2, -6.5 );
			var windows = new THREE.Mesh( new THREE.BoxGeometry( 0.5, 1.9, 3.9 ) );
			windows.position.set( -1.75, 1.2, -6.5 );
			var csg = new CSG();
			csg.subtract( [frame, windows] );
			var frame = csg.toMesh();
			scene.add(frame);

			var csg = new CSG();
			csg.subtract( [OutsideWall, frame, windows] );
			var OutsideWall = csg.toMesh();
		//window
			var windows = new THREE.Mesh( new THREE.BoxGeometry( 0.2, 1.9, 3.9 ) );
			windows.material = new THREE.MeshPhongMaterial( {color:'cornflowerblue', opacity: 0.5, transparent: true} )
			windows.position.set( -1.75, 1.2, -6.5 );
			scene.add(windows);
			
		
	//living room window x2			
		//frames
			var frame1 = new THREE.Mesh( new THREE.BoxGeometry( 0.5, 2, 7 ) );
			frame1.material = new THREE.MeshPhongMaterial( {color:'whitesmoke'} )
			frame1.position.set( -5.75,1.2,0 );
			var windows1 = new THREE.Mesh( new THREE.BoxGeometry( 0.5, 1.9, 6.9 ) );
			windows1.position.set( -5.75,1.2,0 );
			var csg = new CSG();
			csg.subtract( [frame1, windows1] );
			var frame1 = csg.toMesh();
			scene.add(frame1);

			var frame2 = new THREE.Mesh( new THREE.BoxGeometry( 3.5, 2, 0.5) );
			frame2.material = new THREE.MeshPhongMaterial( {color:'whitesmoke'} )
			frame2.position.set(  -3.75 ,1.2, -3.75  );
			var windows2 = new THREE.Mesh( new THREE.BoxGeometry( 3.4, 1.9, 0.5 ) );
			windows2.position.set(  -3.75 ,1.2, -3.75  );
			var csg = new CSG();
			csg.subtract( [frame2, windows2] );
			var frame2 = csg.toMesh();
			scene.add(frame2);

			var csg = new CSG();
			csg.subtract( [OutsideWall, frame1, windows1, frame2, windows2] );
			var OutsideWall = csg.toMesh();

		//windows
			var windows1 = new THREE.Mesh( new THREE.BoxGeometry( 0.2, 1.9, 6.9 ) );
			windows1.material = new THREE.MeshPhongMaterial( {color:'cornflowerblue', opacity: 0.5, transparent: true} )
			windows1.position.set( -5.75,1.2,0 );
			scene.add(windows1);

			var windows2 = new THREE.Mesh( new THREE.BoxGeometry( 3.5, 2, 0.2 ) );
			windows2.material = new THREE.MeshPhongMaterial( {color:'cornflowerblue', opacity: 0.5, transparent: true} )
			windows2.position.set( -3.75 ,1.2, -3.75 );
			scene.add(windows2);
		
		
//scene add
			
			scene.add(OutsideWall); //ouside walls
			scene.add(bed); //bed
			scene.add(bath); //bath
			

/******************************* КОНТРАБАС ********************************/

			var baseContra = new THREE.Mesh(new THREE.CylinderGeometry( 0.4, 0.4, 0.2, 20 )) ;
			baseContra.position.set( 0 , 1, 0 );
			
			var topContra = new THREE.Mesh(new THREE.BoxGeometry( 0.3, 0.2, 0.3)) ;
			topContra.position.set( 0.74 , 1, 0 );
			topContra.rotation.y = -Math.PI / 4;

			var top1Contra = new THREE.Mesh(new THREE.CylinderGeometry( 0.2, 0.2, 0.2, 20 )) ;
			top1Contra.position.set( 0.57 , 1, 0.1 );

			var top2Contra = new THREE.Mesh(new THREE.CylinderGeometry( 0.2, 0.2, 0.2, 20 )) ;
			top2Contra.position.set( 0.57 , 1, -0.1 );

			var top1ContraRem = new THREE.Mesh(new THREE.CylinderGeometry( 0.2, 0.2, 0.3, 20 )) ;
			top1ContraRem.position.set( 0.95 , 1, -0.25 );

			var top2ContraRem = new THREE.Mesh(new THREE.CylinderGeometry( 0.2, 0.2, 0.3, 20 )) ;
			top2ContraRem.position.set( 0.95 , 1, 0.25 );

			var midContra = new THREE.Mesh( new THREE.BoxGeometry( 0.5, 0.2, 0.5) );
			midContra.position.set( 0.4 ,1 , 0 );

			var mid1ContraRem = new THREE.Mesh(new THREE.CylinderGeometry( 0.2, 0.2, 0.3, 20 )) ;
			mid1ContraRem.position.set( 0.35 , 1, 0.4 );

			var mid2ContraRem = new THREE.Mesh(new THREE.CylinderGeometry( 0.2, 0.2, 0.3, 20 )) ;
			mid2ContraRem.position.set( 0.35 , 1, -0.4 );

	//adding/substracting
			
			var csg = new CSG();
			csg.union( [baseContra, topContra, top1Contra,  top2Contra, midContra ] );
			var kontra = csg.toMesh();

			var csg = new CSG();
			csg.subtract( [kontra, top1ContraRem, top2ContraRem,  mid1ContraRem, mid2ContraRem ] );
			var kontra = csg.toMesh();
			kontra.material = new THREE.MeshPhongMaterial( {color:'saddlebrown'} );
			
			//scene.add(kontra);

			

	//strings, board, tailpiece, bridge, scroll 

			var scroll = new THREE.Mesh(new THREE.CylinderGeometry( 0.08, 0.08, 0.1, 20 ));
			scroll.material = new THREE.MeshBasicMaterial( {color: 'black'} );
			scroll.rotation.x = Math.PI / 2;
			scroll.position.set( 1.5 , 1.13, 0 );
			//scene.add( scroll );

			var board = new THREE.Mesh(new THREE.BoxGeometry( 1.2, 0.05, 0.1)) ;
			board.material = new THREE.MeshPhongMaterial( {color: 'black'} );
			board.position.set( 0.9 , 1.1, 0 );
			//scene.add( board );

			var tailpieceTop = new THREE.Mesh(new THREE.ConeGeometry( -0.15, 0.2, 4 ));
			tailpieceTop.material = new THREE.MeshBasicMaterial( {color: 'black'} );
			tailpieceTop.position.set( -0.1 , 1.1, 0 );
			tailpieceTop.rotation.z = Math.PI / 2;
			tailpieceTop.rotation.x = Math.PI / 4;
			//scene.add( tailpieceTop );

			var tailpiece = new THREE.Mesh(new THREE.BoxGeometry( 0.3, 0.1, 0.05)) ;
			tailpiece.material = new THREE.MeshPhongMaterial( {color: 'black'} );
			tailpiece.position.set( -0.2 , 1.1, 0 );
			//scene.add( tailpiece );

			var string1 = new THREE.Mesh(new THREE.BoxGeometry( 1.43, 0.001, 0.003)) ;
			string1.material = new THREE.MeshPhongMaterial( {color: 'sand'} );
			string1.position.set( 0.72 , 1.2, -0.03 );
			//scene.add( string1 );
			var string2 = new THREE.Mesh(new THREE.BoxGeometry( 1.43, 0.001, 0.003)) ;
			string2.position.set( 0.72 , 1.2, -0.01 );
			//scene.add( string2 );
			var string3 = new THREE.Mesh(new THREE.BoxGeometry( 1.43, 0.001, 0.003)) ;
			string3.position.set( 0.72 , 1.2, 0.01 );
			//scene.add( string3 );
			var string4 = new THREE.Mesh(new THREE.BoxGeometry( 1.43, 0.001, 0.003)) ;
			string4.position.set( 0.72 , 1.2, 0.03 );
			//scene.add( string4 );

			var bridge = new THREE.Mesh(new THREE.BoxGeometry( 0.04, 0.2, 0.19)) ;
			bridge.material = new THREE.MeshPhongMaterial( {color: 'sand'} );
			bridge.position.set( 0.15 , 1.1, 0 );
			//scene.add( bridge );


		//grupirane
			var group = new THREE.Group();
			group.add(kontra);
			group.add(scroll);
			group.add(board);
			group.add(tailpieceTop);
			group.add(tailpiece);
			group.add(string1);
			group.add(string2);
			group.add(string3);
			group.add(string4);
			group.add( bridge );
			group.position.set( 1.55 , 0, -4.05 );
			group.rotation.y = Math.PI / 2;
			group.rotation.z = Math.PI / 2.5;
			scene.add(group);




/**************************** настолен фентилатор ************************/
			
			var fanBase = new THREE.Mesh(new THREE.SphereGeometry( 0.2, 15, 5, 0, 2*Math.PI, 0, 0.5 * Math.PI ));
			fanBase.position.set( 0 , 1.1, 3 );
			
			var fanMid = new THREE.Mesh(new THREE.CylinderGeometry( 0.07, 0.07, 0.5, 20 ));
			fanMid.position.set( 0 , 1.4, 3 );
			
			var fanTop = new THREE.Mesh(new THREE.CylinderGeometry( 0.11, 0.11, 0.12, 20 ));
			fanTop.position.set( 0 , 1.6, 2.95 );
			fanTop.rotation.x = Math.PI / 2;
			
			//perki
			var perka1= new THREE.Mesh(new THREE.CylinderGeometry( 0.15, 0.15, 0.01, 20 ));	
			perka1.position.set( 0 , 1.8, 2.95 );
			perka1.rotation.x = Math.PI / 2;

			var perkaCut= new THREE.Mesh(new THREE.CylinderGeometry( 0.14, 0.14, 0.02, 20 ));	
			perkaCut.position.set( 0.2 , 1.75, 2.95 );
			perkaCut.rotation.x = Math.PI / 2;

			var csg = new CSG();
			csg.subtract( [perka1,perkaCut ] );
			var perka1 = csg.toMesh();
			
			var perka2 = csg.toMesh();
			perka2.position.set( -1.62, 1.56, 0 );
			perka2.rotation.z = -Math.PI / 2
			
			var perka3 = csg.toMesh();
			perka3.position.set( 1.55, 2.05, 0 );
			perka3.rotation.z = Math.PI / 1.7
			
			var csg = new CSG();
			csg.union( [fanBase, fanMid, fanTop,  perka1, perka2, perka3 ] );
			var fan = csg.toMesh();
			fan.material = new THREE.MeshPhongMaterial( {color:'white'} );
			fan.position.set( 0, -1, 0 );
			scene.add(fan);

			var safeFan = new THREE.Mesh(new THREE.SphereGeometry( 0.4, 20, 10 ));
			safeFan.material = new THREE.MeshPhongMaterial( { color: 'silver', opacity: 0.5, transparent: true });
			safeFan.position.set( 0 , 0.6, 3 );
			safeFan.scale.setZ(0.5);
			scene.add( safeFan );
			

		</script>
		
	</body>
</html>


